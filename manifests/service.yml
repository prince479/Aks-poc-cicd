#this is service yml
apiVersion: v1
kind: Service
metadata:
  name: webapp
  labels:
    app: weather-forecast
    service: webapp
  annotations:
    service.beta.kubernetes.io/azure-load-balancer-internal: "true"
spec:
  type: LoadBalancer
  loadBalancerIP: 10.50.0.117
  ports:
  --name: https
    - port: 443
      targetPort: https
      protocol: TCP
  selector:
    service: webapp
    
---

apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: webapp-ingress
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /$2
spec:
  ingressClassName: nginx
  rules:
  - http:
      paths:
      - path: /(.*)
        pathType: Prefix
        backend:
          service:
            name: webapp
            port:
              number: 443
# spec:
#   tls:
#     - secretName: dev-horoscopo-secret
#       hosts:
#         - testdev.horoscopo.com
#   rules:
#     - host: testdev.horoscopo.com
#       http:
#         paths:
#         - path: /
#           backend:
#             service:
#               name: webapp
#               port:
#                 number: 443
#           pathType: Exact
